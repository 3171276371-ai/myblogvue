webpackJsonp([8],{Jh2S:function(e,r){},P7ry:function(e,r,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=s("mvHQ"),a=s.n(t),n=s("1pQF"),o={name:"Login",data:function(){return{name:"",username:"",password:"",nusername:"",npassword:"",npassword2:"",login:0,usernameErr:!1,passwordErr:!1,loginErr:!1,nameErr:!1,loginTitle:"用户名或密码错误",nusernameErr:!1,npasswordErr:!1,npassword2Err:!1,registerErr:!1,fullscreenLoading:!1,urlstate:0,registerTitle:""}},methods:{routeChange:function(){this.login=void 0==this.$route.query.login?1:parseInt(this.$route.query.login),this.urlstate=void 0==this.$route.query.urlstate?0:this.$route.query.urlstate,0==this.urlstate?(this.err2005=!1,this.step=1):"urlInvalid"==this.urlstate?(this.err2005=!0,this.step=2):"urlErr"==this.urlstate&&(this.err2005=!0,this.step=1)},loginEnterFun:function(e){13==(window.event?e.keyCode:e.which)&&this.gotoHome()},gotoHome:function(){var e=this,r=/^[\\u4e00-\\u9fa5_a-zA-Z0-9-]{1,16}$/;r.test(e.username)?e.usernameErr=!1:e.usernameErr=!0,e.password&&r.test(e.password)?e.passwordErr=!1:e.passwordErr=!0,e.usernameErr||e.passwordErr||Object(n.l)(e.username,e.password,function(r){200==r.code?(e.$cookie.set("userInfo",a()(r.data),1),e.$cookie.set("token",r.data.token,1),e.$cookie.get("logUrl")?e.$router.push({path:e.$cookie.get("logUrl")}):e.$router.push({path:"/"})):(e.loginErr=!0,e.loginTitle="登录失败")})},registerEnterFun:function(e){13==(window.event?e.keyCode:e.which)&&this.newRegister()},newRegister:function(){var e=this,r=/^[\\u4e00-\\u9fa5_a-zA-Z0-9-]{1,16}$/;r.test(e.nusername)?e.nusernameErr=!1:e.nusernameErr=!0,e.npassword&&r.test(e.npassword)?(e.npasswordErr=!1,e.npassword==e.npassword2?e.npassword2Err=!1:e.npassword2Err=!0):e.npasswordErr=!0,e.nusernameErr||e.npasswordErr||(e.fullscreenLoading=!0,Object(n.q)(e.nusername,e.name,e.npassword,function(r){200==r.code?(alert("注册成功请登录"),e.$router.push({path:"/Login?login=1"})):(e.fullscreenLoading=!1,e.registerErr=!0,e.registerTitle="该用户名已注册,可直接登录")}))},goRegister:function(){this.err2005=!1,this.$router.push({path:"/Login?login=0"})}},components:{},watch:{$route:"routeChange"},created:function(){this.routeChange()}},i={render:function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("div",{staticClass:"container"},[e._m(0),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!e.err2005,expression:"!err2005"}]},[1==e.login?s("div",{staticClass:"loginBox"},[e._m(1),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.loginErr,expression:"loginErr"}],attrs:{title:e.loginTitle,type:"error","show-icon":"",closable:!1}}),e._v(" "),s("el-input",{attrs:{type:"username",placeholder:"用户名"},model:{value:e.username,callback:function(r){e.username=r},expression:"username"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.usernameErr,expression:"usernameErr"}],attrs:{title:"请输入用户名",type:"error","show-icon":"",closable:!1}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"密码"},nativeOn:{keyup:function(r){return"button"in r||!e._k(r.keyCode,"enter",13,r.key,"Enter")?e.loginEnterFun(r):null}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.passwordErr,expression:"passwordErr"}],attrs:{title:"请输入密码",type:"error","show-icon":"",closable:!1}}),e._v(" "),e._m(2),e._v(" "),s("div",{staticClass:"lr-btn tcolors-bg",on:{click:e.gotoHome}},[e._v("登录")]),e._v(" "),e._m(3)],1):s("div",{staticClass:"registerBox"},[e._m(4),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.registerErr,expression:"registerErr"}],attrs:{title:e.registerTitle,type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"text",placeholder:"用户名6-12位"},model:{value:e.nusername,callback:function(r){e.nusername=r},expression:"nusername"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.nusernameErr,expression:"nusernameErr"}],attrs:{title:"用户名错误",type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"text",placeholder:"姓名"},model:{value:e.name,callback:function(r){e.name=r},expression:"name"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.nameErr,expression:"nameErr"}],attrs:{title:"姓名错误",type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"密码:6-12位英文、数字、下划线"},model:{value:e.npassword,callback:function(r){e.npassword=r},expression:"npassword"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.npasswordErr,expression:"npasswordErr"}],attrs:{title:"密码错误",type:"error","show-icon":"",closable:!0}}),e._v(" "),s("el-input",{attrs:{type:"password",placeholder:"确认密码"},nativeOn:{keyup:function(r){return"button"in r||!e._k(r.keyCode,"enter",13,r.key,"Enter")?e.registerEnterFun(r):null}},model:{value:e.npassword2,callback:function(r){e.npassword2=r},expression:"npassword2"}}),e._v(" "),s("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.npassword2Err,expression:"npassword2Err"}],attrs:{title:"重复密码有误",type:"error","show-icon":"",closable:!0}}),e._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.fullscreenLoading,expression:"fullscreenLoading",modifiers:{fullscreen:!0,lock:!0}}],staticClass:"lr-btn tcolors-bg",attrs:{"element-loading-text":"提交中"},on:{click:e.newRegister}},[e._v("注册")])],1)])])])},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("h1",{staticClass:"loginTitle"},[r("a",{attrs:{href:"#/"}},[this._v("陈啸掭的博客")])])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"lr-title"},[r("h1",[this._v("登录")]),this._v(" "),r("p",[this._v("\n                        新用户"),r("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=0"}},[this._v("注册")])])])},function(){var e=this.$createElement,r=this._self._c||e;return r("h3",[r("a",{attrs:{href:""}},[this._v("忘记密码？")])])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"otherLogin"},[r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-fw fa-wechat"})]),this._v(" "),r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-fw fa-qq"})]),this._v(" "),r("a",{attrs:{href:"javascript:void(0)"}},[r("i",{staticClass:"fa fa-fw fa-weibo"})])])},function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"lr-title"},[r("h1",[this._v("注册")]),this._v(" "),r("p",[this._v("\n                        已有账号"),r("a",{staticClass:"tcolors",attrs:{href:"#/Login?login=1"}},[this._v("登录")])])])}]};var l=s("VU/8")(o,i,!1,function(e){s("Jh2S")},null,null);r.default=l.exports}});